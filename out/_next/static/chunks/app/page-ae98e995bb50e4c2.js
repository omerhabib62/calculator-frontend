(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3491:(e,t,s)=>{Promise.resolve().then(s.bind(s,5582))},5582:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(5155),a=s(2115),l=s(3464),n=s(9509);class o{static handleAxiosError(e){if(l.A.isAxiosError(e)){var t,s;if("ECONNREFUSED"===e.code)throw Error("Cannot connect to calculator service. Backend may not be running.");if(null==(s=e.response)||null==(t=s.data)?void 0:t.message)throw Error(e.response.data.message);if(e.message)throw Error(e.message)}if(e instanceof Error)throw Error(e.message);throw Error("An unknown error occurred")}static async calculate(e){try{return(await this.axiosInstance.post("/calculate",e)).data}catch(e){this.handleAxiosError(e)}}static async healthCheck(){try{return(await this.axiosInstance.get("/")).data}catch(e){if(l.A.isAxiosError(e)&&"ECONNREFUSED"===e.code)throw Error("Calculator gateway is not running");throw Error("Health check failed")}}static async runAllTests(){try{console.log("Testing Calculator Gateway...");let e=await l.A.post("".concat(this.gatewayUrl,"/calculate"),{operation:"sum",numbers:[1,2,3,4]});console.log("Result of sum([1,2,3,4]): ".concat(e.data.result));let t=await l.A.post("".concat(this.gatewayUrl,"/calculate"),{operation:"multiply",numbers:[2,3,4]});console.log("Result of multiply([2,3,4]): ".concat(t.data.result));let s=await l.A.post("".concat(this.gatewayUrl,"/calculate"),{operation:"subtract",numbers:[10,3,2]});console.log("Result of subtract([10,3,2]): ".concat(s.data.result));let r=await l.A.post("".concat(this.gatewayUrl,"/calculate"),{operation:"divide",numbers:[100,5,2]});console.log("Result of divide([100,5,2]): ".concat(r.data.result));let a=await l.A.get(this.gatewayUrl);return console.log("Gateway health check: ".concat(a.data)),{sum:e.data.result,multiply:t.data.result,subtract:s.data.result,divide:r.data.result,health:a.data}}catch(s){if(l.A.isAxiosError(s)){var e,t;let r=(null==(t=s.response)||null==(e=t.data)?void 0:e.message)||s.message||"Test execution failed";throw console.error("Error during test execution:",r),Error(r)}if(s instanceof Error)throw console.error("Error during test execution:",s.message),s;throw console.error("Error during test execution: Unknown error"),Error("Unknown error during test execution")}}}function i(){let[e,t]=(0,a.useState)("sum"),[s,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[b,p]=(0,a.useState)([]),[g,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{await o.healthCheck(),h(!0),d("")}catch(e){h(!1),d(e instanceof Error?e.message:"Connection failed")}},f=async()=>{d(""),i(null),m(!0);try{if(!s.trim())throw Error("Please enter at least one number");let t=s.split(",").map(e=>{let t=e.trim();if(!t)throw Error("Empty number found in input");let s=parseFloat(t);if(isNaN(s))throw Error('Invalid number: "'.concat(t,'"'));return s});if(0===t.length)throw Error("Please enter at least one number");let r=await o.calculate({operation:e,numbers:t});i(r.result);let a={id:crypto.randomUUID(),operation:e,numbers:t,result:r.result,timestamp:new Date};p(e=>[a,...e.slice(0,9)]),console.log("Result of ".concat(e,"([").concat(t.join(","),"]): ").concat(r.result))}catch(e){d(e instanceof Error?e.message:"An unknown error occurred"),i(null)}finally{m(!1)}},v=async()=>{m(!0),d(""),y(null);try{let e=await o.runAllTests();y(e);let t=[{id:crypto.randomUUID(),operation:"sum",numbers:[1,2,3,4],result:e.sum,timestamp:new Date},{id:crypto.randomUUID(),operation:"multiply",numbers:[2,3,4],result:e.multiply,timestamp:new Date},{id:crypto.randomUUID(),operation:"subtract",numbers:[10,3,2],result:e.subtract,timestamp:new Date},{id:crypto.randomUUID(),operation:"divide",numbers:[100,5,2],result:e.divide,timestamp:new Date}];p(e=>[...t,...e]),i(e.divide)}catch(t){let e=t instanceof Error?t.message:"Test failed with unknown error";d("Test failed: ".concat(e))}finally{m(!1)}},N={sum:"Addition (+)",subtract:"Subtraction (−)",multiply:"Multiplication (\xd7)",divide:"Division (\xf7)"};return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDEE Calculator Microservices Frontend"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Next.js frontend connected to NestJS microservices"}),(0,r.jsx)("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full text-sm border",children:null===x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-yellow-600",children:"Checking connection..."})]}):x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-green-600",children:"Connected to localhost:3001"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,r.jsx)("span",{className:"text-red-600",children:"Disconnected"}),(0,r.jsx)("button",{onClick:j,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Retry"})]})})]}),!x&&(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-yellow-800 font-semibold text-lg mb-2",children:"⚠️ Microservices Not Running"}),(0,r.jsx)("p",{className:"text-yellow-700 mb-3",children:"Make sure your calculator microservices are running. Open separate terminals and run:"}),(0,r.jsxs)("div",{className:"bg-yellow-100 rounded p-3 font-mono text-sm text-yellow-800 space-y-1",children:[(0,r.jsx)("div",{children:"cd /home/omers-pc/Projects/calculator-backend"}),(0,r.jsx)("div",{children:"# Start all services in separate terminals:"}),(0,r.jsx)("div",{children:"cd gateway && npm start"}),(0,r.jsx)("div",{children:"cd sum && npm start"}),(0,r.jsx)("div",{children:"cd subtract && npm start"}),(0,r.jsx)("div",{children:"cd multiply && npm start"}),(0,r.jsx)("div",{children:"cd divide && npm start"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Calculator"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operation"}),(0,r.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!x,children:Object.entries(N).map(e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numbers (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"e.g., 1, 2, 3, 4",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!x,onKeyPress:e=>"Enter"===e.key&&!u&&f()}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Enter numbers separated by commas. Press Enter to calculate."})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:f,disabled:u||!s.trim()||!x,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Calculating...":"Calculate"}),(0,r.jsx)("button",{onClick:v,disabled:u||!x,className:"px-6 py-3 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Run All Tests"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Tests (from your test-client.ts):"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{operation:"sum",numbers:[1,2,3,4],expected:10},{operation:"multiply",numbers:[2,3,4],expected:24},{operation:"subtract",numbers:[10,3,2],expected:5},{operation:"divide",numbers:[100,5,2],expected:10}].map((e,s)=>(0,r.jsxs)("button",{onClick:()=>{t(e.operation),l(e.numbers.join(", ")),i(null),d("")},disabled:!x,className:"p-2 text-left text-xs border border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50",children:[(0,r.jsx)("div",{className:"font-medium",children:N[e.operation]}),(0,r.jsxs)("div",{className:"text-gray-500",children:["[",e.numbers.join(", "),"] = ",e.expected]})]},s))})]}),null!==n&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"✅ Result"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-900",children:n})]}),c&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"❌ Error"}),(0,r.jsx)("p",{className:"text-red-700",children:c})]}),g&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"\uD83E\uDDEA Test Results"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-blue-700",children:[(0,r.jsxs)("div",{children:["Sum([1,2,3,4]): ",g.sum]}),(0,r.jsxs)("div",{children:["Multiply([2,3,4]): ",g.multiply]}),(0,r.jsxs)("div",{children:["Subtract([10,3,2]): ",g.subtract]}),(0,r.jsxs)("div",{children:["Divide([100,5,2]): ",g.divide]}),(0,r.jsxs)("div",{children:["Health: ",g.health]})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"History"}),b.length>0&&(0,r.jsx)("button",{onClick:()=>p([]),className:"text-sm text-red-600 hover:text-red-800",children:"Clear"})]}),0===b.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No calculations yet"}):(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b.map(e=>(0,r.jsx)("div",{className:"p-3 bg-gray-50 rounded-md border-l-4 border-blue-500",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:N[e.operation]}),(0,r.jsxs)("div",{className:"text-gray-600",children:["[",e.numbers.join(", "),"] ="," ",(0,r.jsx)("span",{className:"font-semibold",children:e.result})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.timestamp.toLocaleTimeString()})]})},e.id))})]})})]})]})}o.gatewayUrl=n.env.NEXT_PUBLIC_CALCULATOR_GATEWAY_URL||"https://your-production-api.com",o.axiosInstance=l.A.create({baseURL:o.gatewayUrl,timeout:1e4,headers:{"Content-Type":"application/json"}})}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=3491)),_N_E=e.O()}]);